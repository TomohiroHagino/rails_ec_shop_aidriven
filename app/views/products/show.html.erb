<div class="product-detail">
  <%= link_to "← 商品一覧に戻る", products_path, class: "product-detail__back-link" %>

  <div class="product-detail__container">
    <h1 class="product-detail__title"><%= @product.name %></h1>
    
    <p class="product-detail__price">
      ¥<%= number_with_delimiter(@product.price.to_i) %>
    </p>
    
    <div class="product-detail__description-section">
      <h3 class="product-detail__description-title">商品説明</h3>
      <p class="product-detail__description-text"><%= @product.description %></p>
    </div>
    
    <p class="product-detail__stock">
      <strong>在庫数:</strong> <%= @product.stock_quantity %>
    </p>
    
    <% if logged_in? %>
      <%= form_with url: cart_items_path, method: :post, local: true, class: "product-detail__form" do |f| %>
        <%= f.hidden_field :product_id, value: @product.id.value %>
        
        <div class="product-detail__quantity-group">
          <%= f.label :quantity, "数量", class: "form__label" %>
          <%= f.number_field :quantity, value: 1, min: 1, max: @product.stock_quantity, class: "product-detail__quantity-input" %>
        </div>
        
        <%= f.submit "カートに追加", class: "product-detail__submit-btn" %>
      <% end %>
    <% else %>
      <p class="product-detail__login-notice">
        カートに追加するには<%= link_to "ログイン", new_user_session_path, class: "link" %>してください
      </p>
    <% end %>
  </div>
</div>

