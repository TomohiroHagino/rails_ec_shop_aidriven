# ECã‚·ãƒ§ãƒƒãƒ—ã‚¢ãƒ—ãƒªï¼ˆDDD + ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼‰

Ruby on Rails 8 ã¨ DDDï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆï¼‰ã§æ§‹ç¯‰ã•ã‚ŒãŸECã‚·ãƒ§ãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

## ğŸ“– æ¦‚è¦

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆï¼ˆDDDï¼‰ã®åŸå‰‡ã«å¾“ã£ã¦è¨­è¨ˆã•ã‚ŒãŸã€å®Ÿè·µçš„ãªECã‚·ãƒ§ãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã«é›†ç´„ã—ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‹ã‚‰åˆ†é›¢ã—ã¦ã„ã¾ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½

- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ»èªè¨¼
- âœ… å•†å“ä¸€è¦§ãƒ»è©³ç´°è¡¨ç¤º
- âœ… ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆæ©Ÿèƒ½
- âœ… æ³¨æ–‡å‡¦ç†
- âœ… æ³¨æ–‡å±¥æ­´è¡¨ç¤º

---

## ğŸ— ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ¨ Presentationå±¤            â”‚  Controllerã€View
â”‚  (app/controllers, app/views)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     âš™ï¸ Applicationå±¤             â”‚  ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆã‚µãƒ¼ãƒ“ã‚¹ï¼‰
â”‚      (app/application)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ’¡ Domainå±¤                   â”‚  ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚       (app/domain)              â”‚  ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ—„ï¸ Infrastructureå±¤          â”‚  ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…ã€ActiveRecord
â”‚   (app/infrastructure)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
app/
â”œâ”€â”€ domain/                          # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”œâ”€â”€ user_aggregate/               # Userã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚   â””â”€â”€ user_entity.rb      # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ value_object/
â”‚   â”‚   â”‚   â”œâ”€â”€ user_id.rb          # ãƒ¦ãƒ¼ã‚¶ãƒ¼IDå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ email.rb            # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â””â”€â”€ user_repository.rb  # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ product_aggregate/            # Productã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚   â””â”€â”€ product_entity.rb
â”‚   â”‚   â”œâ”€â”€ value_object/
â”‚   â”‚   â”‚   â”œâ”€â”€ product_id.rb
â”‚   â”‚   â”‚   â””â”€â”€ price.rb
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â””â”€â”€ product_repository.rb
â”‚   â”œâ”€â”€ cart_aggregate/               # Cartã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚   â””â”€â”€ cart_item_entity.rb
â”‚   â”‚   â”œâ”€â”€ value_object/
â”‚   â”‚   â”‚   â””â”€â”€ cart_item_id.rb
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â””â”€â”€ cart_repository.rb
â”‚   â””â”€â”€ order_aggregate/              # Orderã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆãƒ«ãƒ¼ãƒˆ
â”‚       â”œâ”€â”€ entity/
â”‚       â”‚   â”œâ”€â”€ order_entity.rb
â”‚       â”‚   â””â”€â”€ order_item_entity.rb
â”‚       â”œâ”€â”€ value_object/
â”‚       â”‚   â”œâ”€â”€ order_id.rb
â”‚       â”‚   â””â”€â”€ order_status.rb
â”‚       â””â”€â”€ repository/
â”‚           â””â”€â”€ order_repository.rb
â”‚
â”œâ”€â”€ application/                     # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼‰
â”‚   â”œâ”€â”€ user_aggregate/
â”‚   â”‚   â””â”€â”€ (ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼æ©Ÿèƒ½ã¯deviseã‚’ä½¿ç”¨)
â”‚   â”‚
â”‚   â”œâ”€â”€ product_aggregate/
â”‚   â”‚   â”œâ”€â”€ list_products_service.rb
â”‚   â”‚   â””â”€â”€ get_product_service.rb
â”‚   â”œâ”€â”€ cart_aggregate/
â”‚   â”‚   â”œâ”€â”€ add_to_cart_service.rb
â”‚   â”‚   â”œâ”€â”€ get_cart_service.rb
â”‚   â”‚   â””â”€â”€ remove_from_cart_service.rb
â”‚   â””â”€â”€ order_aggregate/
â”‚       â”œâ”€â”€ create_order_service.rb
â”‚       â””â”€â”€ get_orders_service.rb
â”‚
â”œâ”€â”€ infrastructure/                  # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â””â”€â”€ user_repository_impl.rb
â”‚   â”œâ”€â”€ product/
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â””â”€â”€ product_repository_impl.rb
â”‚   â”œâ”€â”€ cart/
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â””â”€â”€ cart_repository_impl.rb
â”‚   â””â”€â”€ order/
â”‚       â””â”€â”€ repository/
â”‚           â””â”€â”€ order_repository_impl.rb
â”‚
â”œâ”€â”€ models/                          # ActiveRecordãƒ¢ãƒ‡ãƒ«ï¼ˆInfrastructureå±¤ã§ä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ user.rb
â”‚   â”œâ”€â”€ product.rb
â”‚   â”œâ”€â”€ cart_item.rb
â”‚   â”œâ”€â”€ order.rb
â”‚   â””â”€â”€ order_item.rb
â”‚
â”œâ”€â”€ controllers/                     # Presentationå±¤
â”‚   â”œâ”€â”€ application_controller.rb
â”‚   â”œâ”€â”€ home_controller.rb
â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â””â”€â”€ registrations_controller.rb
â”‚   â”œâ”€â”€ products_controller.rb
â”‚   â”œâ”€â”€ cart_items_controller.rb
â”‚   â””â”€â”€ orders_controller.rb
â”‚
â””â”€â”€ views/                           # ãƒ“ãƒ¥ãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
    â”œâ”€â”€ layouts/
    â”‚   â””â”€â”€ application.html.erb
    â”œâ”€â”€ home/
    â”œâ”€â”€ users/
    â”‚   â”œâ”€â”€ sessions/
    â”‚   â”‚   â””â”€â”€ new.html.erb
    â”‚   â””â”€â”€ registrations/
    â”‚       â””â”€â”€ new.html.erb
    â”œâ”€â”€ products/
    â”œâ”€â”€ cart_items/
    â””â”€â”€ orders/
```

### ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®ä¾å­˜é–¢ä¿‚

```
ğŸ¨ Presentation
        â†“
âš™ï¸ Application
        â†“
ğŸ’¡ Domain
        â†‘
ğŸ—„ï¸ Infrastructure
```

**ãƒ«ãƒ¼ãƒ«**:
- Presentationå±¤ã¯Applicationå±¤ã‚’å‘¼ã³å‡ºã™
- Applicationå±¤ã¯Domainå±¤ã®ã¿ã«ä¾å­˜
- Domainå±¤ã¯ä»–ã®å±¤ã«ä¾å­˜ã—ãªã„ï¼ˆç´”ç²‹ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
- Infrastructureå±¤ã¯Domainå±¤ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦è¦ä»¶

- Ruby 3.4.1
- Rails 8.0
- SQLite3
- Bundler

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd ec_shop_aidriven

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
bundle install

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
rails db:create db:migrate

# ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥
rails db:seed

# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
rails server
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:3000` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ® ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
# Railsã‚µãƒ¼ãƒãƒ¼èµ·å‹•
rails server
```

`http://localhost:3000` ã«ã‚¢ã‚¯ã‚»ã‚¹

### ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼

ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã§ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆã•ã‚Œã¾ã™ï¼š

- **Email**: `test@example.com`
- **Password**: `Password123`

ã¾ãŸã¯

- **Email**: `sample@example.com`
- **Password**: `Password123`

**æ³¨æ„**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯å¤§æ–‡å­—ã€å°æ–‡å­—ã€æ•°å­—ã‚’å«ã‚€8æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

---

## ğŸ“ ä½¿ã„æ–¹

### 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²

1. ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ã€Œæ–°è¦ç™»éŒ²ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. åå‰ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›
   - **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¦ä»¶**: 8æ–‡å­—ä»¥ä¸Šã€å¤§æ–‡å­—ãƒ»å°æ–‡å­—ãƒ»æ•°å­—ã‚’å«ã‚€
   - ä¾‹: `Password123`
3. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèªã‚’å…¥åŠ›
4. ã€Œç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
5. è‡ªå‹•çš„ã«ãƒ­ã‚°ã‚¤ãƒ³ã•ã‚Œã€å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ã¸é·ç§»

### 2. å•†å“é–²è¦§

1. ã€Œå•†å“ä¸€è¦§ã€ãƒšãƒ¼ã‚¸ã§åœ¨åº«ã®ã‚ã‚‹å•†å“ã‚’é–²è¦§
2. å•†å“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è©³ç´°ã‚’ç¢ºèª
3. ã€Œã‚«ãƒ¼ãƒˆã¸ã€ãƒœã‚¿ãƒ³ã§ã‚«ãƒ¼ãƒˆã«è¿½åŠ 

### 3. ã‚«ãƒ¼ãƒˆç®¡ç†

1. ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã€Œã‚«ãƒ¼ãƒˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã‚«ãƒ¼ãƒˆå†…ã®å•†å“ã‚’ç¢ºèª
3. ä¸è¦ãªå•†å“ã¯ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã§å‰Šé™¤å¯èƒ½
4. ã€Œæ³¨æ–‡ã‚’ç¢ºå®šã™ã‚‹ã€ãƒœã‚¿ãƒ³ã§æ³¨æ–‡ã‚’ä½œæˆ

### 4. æ³¨æ–‡å±¥æ­´

1. ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã€Œæ³¨æ–‡å±¥æ­´ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. éå»ã®æ³¨æ–‡ã‚’ç¢ºèª
3. å„æ³¨æ–‡ã®è©³ç´°ï¼ˆå•†å“ã€æ•°é‡ã€é‡‘é¡ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰ã‚’è¡¨ç¤º

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

RSpecã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
bundle exec rspec

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
bundle exec rspec spec/domain/user/entity/user_entity_spec.rb
```

---

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Framework**: Ruby on Rails 8.0
- **Language**: Ruby 3.4.1
- **Database**: SQLite3
- **Authentication**: Devise (ã‚»ã‚­ãƒ¥ã‚¢èªè¨¼)
  - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æš—å·åŒ–ï¼ˆBCryptï¼‰
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
  - Remember meæ©Ÿèƒ½
  - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³å›ºå®šæ”»æ’ƒå¯¾ç­–
- **Testing**: RSpec 7.0
  - FactoryBot (ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ)
  - Database Cleaner (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°)
  - Shoulda Matchers (ãƒãƒƒãƒãƒ£ãƒ¼)
- **Asset Pipeline**: Propshaft + Dart Sass
- **CSS**: BEMæ–¹å¼
- **Responsive Design**: ãƒ¢ãƒã‚¤ãƒ«ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã€ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å¯¾å¿œ
- **Architecture**: DDD + Layered Architecture

---

## ğŸ”‘ ä¸»è¦ãªè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

### 1. Aggregate Pattern

**OrderEntity** ãŒ **OrderItemEntity** ã‚’é›†ç´„ã—ã€æ•´åˆæ€§ã‚’ä¿è¨¼ã—ã¾ã™ã€‚
å„ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯æ˜ç¢ºã«ã‚¢ã‚°ãƒªã‚²ãƒ¼ãƒˆãƒ«ãƒ¼ãƒˆã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ï¼š

- **UserAggregate**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®æ•´åˆæ€§ã‚’ä¿è¨¼
- **ProductAggregate**: å•†å“æƒ…å ±ã®æ•´åˆæ€§ã‚’ä¿è¨¼  
- **CartAggregate**: ã‚«ãƒ¼ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®æ•´åˆæ€§ã‚’ä¿è¨¼
- **OrderAggregate**: æ³¨æ–‡ã¨æ³¨æ–‡æ˜ç´°ã®æ•´åˆæ€§ã‚’ä¿è¨¼

### 2. Repository Pattern

ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã‚’æŠ½è±¡åŒ–ã—ã€Domainå±¤ã‚’ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‹ã‚‰åˆ†é›¢ã—ã¦ã„ã¾ã™ã€‚

### 3. Value Object

**Email**ã€**Price**ã€**OrderStatus** ãªã©ã®ä¸å¤‰ã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ«ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¦ã„ã¾ã™ã€‚

### 4. Application Service (Use Case)

å„ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’1ã¤ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å˜ä½ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

ä¾‹ï¼š
- `ListProductsService`: å•†å“ä¸€è¦§å–å¾—
- `AddToCartService`: ã‚«ãƒ¼ãƒˆè¿½åŠ 
- `CreateOrderService`: æ³¨æ–‡ä½œæˆ

### 5. Dependency Injection

ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ç–çµåˆã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
---

## ğŸ¤” ã€Œ2ã¤ã®ãƒ¢ãƒ‡ãƒ«ã€å•é¡Œã®è§£æ±º

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€**ActiveRecord Model** ã¨ **Domain Entity** ãŒå…±å­˜ã—ã¦ã„ã¾ã™ã€‚

### ActiveRecord Modelï¼ˆInfrastructureå±¤ï¼‰

```ruby
# app/models/user.rb
class User < ApplicationRecord
  # Deviseã«ã‚ˆã‚‹èªè¨¼æ©Ÿèƒ½
  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :validatable
end
```

### Domain Entityï¼ˆDomainå±¤ï¼‰

```ruby
# app/domain/user_aggregate/entity/user_entity.rb
class UserEntity
  # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å°‚ç”¨
  def change_email(new_email)
    # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ«ã‚’å®Ÿè£…
  end
end
```

### å¤‰æ›ã¯Repositoryå®Ÿè£…ã§è¡Œã†

```ruby
# app/infrastructure/user/repository/user_repository_impl.rb
def to_entity(user)
  Domain::UserAggregate::Entity::UserEntity.new(
    id: Domain::UserAggregate::ValueObject::UserId.new(user.id),
    name: user.name,
    email: Domain::UserAggregate::ValueObject::Email.new(user.email),
    password_digest: user.encrypted_password
  )
end
```

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

- **users**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
- **products**: å•†å“æƒ…å ±
- **cart_items**: ã‚«ãƒ¼ãƒˆã‚¢ã‚¤ãƒ†ãƒ 
- **orders**: æ³¨æ–‡æƒ…å ±
- **order_items**: æ³¨æ–‡æ˜ç´°

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

### Deviseã«ã‚ˆã‚‹èªè¨¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

1. **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æš—å·åŒ–**: BCryptã«ã‚ˆã‚‹å¼·åŠ›ãªãƒãƒƒã‚·ãƒ¥åŒ–
2. **ã‚»ãƒƒã‚·ãƒ§ãƒ³å›ºå®šæ”»æ’ƒå¯¾ç­–**: ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’è‡ªå‹•å†ç”Ÿæˆ
3. **ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹æœŸé™**: 2æ™‚é–“ã§è‡ªå‹•ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
4. **Remember meæ©Ÿèƒ½**: å®‰å…¨ãªæ°¸ç¶šãƒ­ã‚°ã‚¤ãƒ³
5. **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ**: ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹ã®å®‰å…¨ãªãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½

### å¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒªã‚·ãƒ¼

- æœ€ä½8æ–‡å­—ä»¥ä¸Š
- å¤§æ–‡å­—ã‚’å«ã‚€ï¼ˆA-Zï¼‰
- å°æ–‡å­—ã‚’å«ã‚€ï¼ˆa-zï¼‰
- æ•°å­—ã‚’å«ã‚€ï¼ˆ0-9ï¼‰

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼

- `X-Frame-Options: SAMEORIGIN` - ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–
- `X-Content-Type-Options: nosniff` - MIMEã‚¿ã‚¤ãƒ—ã‚¹ãƒ‹ãƒƒãƒ•ã‚£ãƒ³ã‚°å¯¾ç­–
- `X-XSS-Protection: 1; mode=block` - XSSå¯¾ç­–
- CSRFä¿è­·ãŒæœ‰åŠ¹

### Cookieè¨­å®š

- `httponly: true` - JavaScriptã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹é˜²æ­¢
- `same_site: :lax` - CSRFå¯¾ç­–
- `secure: true`ï¼ˆæœ¬ç•ªç’°å¢ƒã®ã¿ï¼‰ - HTTPSé€šä¿¡ã®ã¿

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Domain-Driven Design by Eric Evans](https://www.amazon.co.jp/dp/0321125215)
- [Rails Guides](https://guides.rubyonrails.org/)
- [Clean Architecture by Robert C. Martin](https://www.amazon.co.jp/dp/4048930656)

---

## ğŸ¨ ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

### ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ‡ãƒã‚¤ã‚¹

- ğŸ“± **ãƒ¢ãƒã‚¤ãƒ«** (ã€œ768px): ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³æœ€é©åŒ–
- ğŸ“± **ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ** (769pxã€œ1024px): ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆæœ€é©åŒ–  
- ğŸ–¥ **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—** (1025pxã€œ): PCæœ€é©åŒ–

### ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã®ç‰¹å¾´

- âœ… å›ºå®šãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆç”»é¢ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã‚‚è¡¨ç¤ºï¼‰
- âœ… ã‚¿ãƒƒãƒãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒœã‚¿ãƒ³ã‚µã‚¤ã‚ºï¼ˆæœ€å°44pxï¼‰
- âœ… 1ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- âœ… èª­ã¿ã‚„ã™ã„ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º
- âœ… iOSã‚ºãƒ¼ãƒ é˜²æ­¢ï¼ˆinputè¦ç´ ã¯16pxä»¥ä¸Šï¼‰
- âœ… ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚°ãƒªãƒƒãƒ‰

---

## ğŸ¯ ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

- [ ] ç®¡ç†ç”»é¢ã®è¿½åŠ ï¼ˆå•†å“ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ï¼‰
- [ ] å•†å“ã‚«ãƒ†ã‚´ãƒªæ©Ÿèƒ½
- [ ] å•†å“æ¤œç´¢æ©Ÿèƒ½
- [ ] ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
- [ ] ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½
- [ ] æ³¨æ–‡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°ï¼ˆç¢ºå®šã€ç™ºé€ã€é…é”å®Œäº†ï¼‰
- [ ] æ±ºæ¸ˆæ©Ÿèƒ½ã®çµ±åˆ
- [ ] APIåŒ–ï¼ˆRESTful APIï¼‰
- [ ] Event Sourcingå°å…¥
- [ ] CQRS ãƒ‘ã‚¿ãƒ¼ãƒ³é©ç”¨
- [ ] ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

---

Made with â¤ï¸ using Ruby on Rails & DDD
